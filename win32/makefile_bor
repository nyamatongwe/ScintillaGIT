# Make file for Scintilla on Windows Borland C++ Builder version
# Copyright 1998-2000 by Neil Hodgson <neilh@scintilla.org>
# The License.txt file describes the conditions under which this software may be distributed.
# This makefile is for using Borland C++ and Borland make. 
# I test with Borland C++ 5.5
# The main makefile uses mingw32 gcc and may be more current than this file.

.SUFFIXES: .cxx
CC = bcc32
RC = brcc32
LD = ilink32

DIR_O=.
DIR_BIN=..\bin

COMPONENT=$(DIR_BIN)\Scintilla.dll
LEXCOMPONENT=$(DIR_BIN)\SciLexer.dll

LDFLAGS = import32 cw32mt
INCLUDEDIRS=-I../include -I../src
CXXFLAGS = -P -O1 -tWM -w -w-prc -RT- -x- -v
NAMEFLAG=-o

.cxx.obj:
	$(CC) $(INCLUDEDIRS) $(CXXFLAGS) -c $*.cxx

.rc.res:
	$(RC) /r $*.rc
	
ALL:	$(COMPONENT) $(LEXCOMPONENT) $(DIR_O)\ScintillaWinS.obj $(DIR_O)\WindowAccessor.obj

clean:
	del /q *.exe *.o *.obj *.dll *.res *.map

SOBJS=\
	$(DIR_O)\AutoComplete.obj \
	$(DIR_O)\CallTip.obj \
	$(DIR_O)\CellBuffer.obj \
	$(DIR_O)\ContractionState.obj \
	$(DIR_O)\Document.obj \
	$(DIR_O)\Editor.obj \
	$(DIR_O)\Indicator.obj \
	$(DIR_O)\KeyMap.obj \
	$(DIR_O)\LineMarker.obj \
	$(DIR_O)\PlatWin.obj \
	$(DIR_O)\ScintillaBase.obj \
	$(DIR_O)\ScintillaWin.obj \
	$(DIR_O)\Style.obj \
	$(DIR_O)\UniConversion.obj \
	$(DIR_O)\ViewStyle.obj

LEXOBJS=\
	$(DIR_O)\LexCPP.obj \
	$(DIR_O)\LexHTML.obj \
	$(DIR_O)\LexLua.obj \
	$(DIR_O)\LexOthers.obj \
	$(DIR_O)\LexPerl.obj \
	$(DIR_O)\LexPython.obj \
	$(DIR_O)\LexSQL.obj \
	$(DIR_O)\LexVB.obj

LOBJS=\
	$(DIR_O)\AutoComplete.obj \
	$(DIR_O)\CallTip.obj \
	$(DIR_O)\CellBuffer.obj \
	$(DIR_O)\ContractionState.obj \
	$(DIR_O)\Document.obj \
	$(DIR_O)\DocumentAccessor.obj \
	$(DIR_O)\Editor.obj \
	$(DIR_O)\Indicator.obj \
	$(DIR_O)\KeyMap.obj \
	$(DIR_O)\KeyWords.obj \
	$(DIR_O)\LineMarker.obj \
	$(DIR_O)\PlatWin.obj \
	$(DIR_O)\PropSet.obj \
	$(DIR_O)\ScintillaBaseL.obj \
	$(DIR_O)\ScintillaWinL.obj \
	$(DIR_O)\Style.obj \
	$(DIR_O)\UniConversion.obj \
	$(DIR_O)\ViewStyle.obj \
	$(LEXOBJS)
	
$(COMPONENT): $(SOBJS) ScintRes.res
	$(LD) -Tpd /c c0d32 $(SOBJS), $@, ,$(LDFLAGS), , ScintRes.res
	
$(LEXCOMPONENT): $(LOBJS)
	$(LD) -Tpd /c c0d32 $(LOBJS), $@, ,$(LDFLAGS), , ScintRes.res
	
!include objs.mak
